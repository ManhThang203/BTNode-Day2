# Express API Project - REST API vá»›i Posts vÃ  Comments

Dá»± Ã¡n REST API Ä‘Æ¡n giáº£n sá»­ dá»¥ng Express.js vÃ  JSON Database Ä‘á»ƒ quáº£n lÃ½ Posts vÃ  Comments.

## ğŸ“‹ Má»¥c lá»¥c

- [YÃªu cáº§u há»‡ thá»‘ng](#yÃªu-cáº§u-há»‡-thá»‘ng)
- [CÃ i Ä‘áº·t](#cÃ i-Ä‘áº·t)
- [CÃ¡ch cháº¡y](#cÃ¡ch-cháº¡y)
- [API Endpoints](#api-endpoints)
- [Cáº¥u trÃºc thÆ° má»¥c](#cáº¥u-trÃºc-thÆ°-má»¥c)
- [Test API vá»›i Postman](#test-api-vá»›i-postman)

---

## ğŸ”§ YÃªu cáº§u há»‡ thá»‘ng

TrÆ°á»›c khi báº¯t Ä‘áº§u, Ä‘áº£m báº£o mÃ¡y tÃ­nh cá»§a báº¡n Ä‘Ã£ cÃ i Ä‘áº·t:

- **Node.js** phiÃªn báº£n 14.x trá»Ÿ lÃªn
- **npm** (Ä‘i kÃ¨m vá»›i Node.js)
- **Git** (Ä‘á»ƒ clone project)

### Kiá»ƒm tra phiÃªn báº£n:

```bash
node --version
npm --version
```

Náº¿u chÆ°a cÃ i Node.js, táº£i táº¡i: https://nodejs.org/

---

## ğŸ“¦ CÃ i Ä‘áº·t

### BÆ°á»›c 1: Clone hoáº·c táº£i project

```bash
# Náº¿u cÃ³ Git repository
git clone <your-repo-url>
cd express-api-project

# Hoáº·c táº£i ZIP vÃ  giáº£i nÃ©n
```

### BÆ°á»›c 2: CÃ i Ä‘áº·t dependencies

```bash
npm install
```

Lá»‡nh nÃ y sáº½ cÃ i Ä‘áº·t:
- `express` - Framework web
- `cors` - Xá»­ lÃ½ CORS policy

### BÆ°á»›c 3: Kiá»ƒm tra cÃ i Ä‘áº·t

```bash
npm list --depth=0
```

Báº¡n sáº½ tháº¥y:
```
express-api-project@1.0.0
â”œâ”€â”€ cors@2.8.5
â””â”€â”€ express@4.18.2
```

---

## ğŸš€ CÃ¡ch cháº¡y

### Cháº¡y server

```bash
node server.js
```

### Káº¿t quáº£ mong Ä‘á»£i:

```
Server is running on http://localhost:3000
```

### Kiá»ƒm tra server Ä‘Ã£ cháº¡y:

Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p: http://localhost:3000/api/posts

Hoáº·c dÃ¹ng lá»‡nh:

```bash
curl http://localhost:3000/api/posts
```

### Dá»«ng server:

Nháº¥n `Ctrl + C` trong terminal

---

## ğŸ“¡ API Endpoints

### Base URL

```
http://localhost:3000/api
```

### Posts API

| Method | Endpoint | Description | Body |
|--------|----------|-------------|------|
| GET | `/posts` | Láº¥y táº¥t cáº£ posts | - |
| GET | `/posts/:id` | Láº¥y 1 post theo ID | - |
| POST | `/posts` | Táº¡o post má»›i | `{title, content}` |
| PUT | `/posts/:id` | Cáº­p nháº­t post | `{title, content}` |
| DELETE | `/posts/:id` | XÃ³a post | - |

### Comments API

| Method | Endpoint | Description | Body |
|--------|----------|-------------|------|
| GET | `/comments` | Láº¥y táº¥t cáº£ comments | - |
| GET | `/comments/:id` | Láº¥y 1 comment theo ID | - |
| POST | `/comments` | Táº¡o comment má»›i | `{postId, content}` |
| PUT | `/comments/:id` | Cáº­p nháº­t comment | `{content}` |
| DELETE | `/comments/:id` | XÃ³a comment | - |

---

## ğŸ“‚ Cáº¥u trÃºc thÆ° má»¥c

```
express-api-project/
â”‚
â”œâ”€â”€ server.js                   # File chÃ­nh Ä‘á»ƒ cháº¡y server
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ index.js           # Mount táº¥t cáº£ routes
â”‚   â”‚   â”œâ”€â”€ posts.route.js     # Routes cho posts
â”‚   â”‚   â””â”€â”€ comments.route.js  # Routes cho comments
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ post.controller.js    # Logic xá»­ lÃ½ posts
â”‚   â”‚   â””â”€â”€ comment.controller.js # Logic xá»­ lÃ½ comments
â”‚   â”‚
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ post.model.js      # Model lÃ m viá»‡c vá»›i posts DB
â”‚       â””â”€â”€ comment.model.js   # Model lÃ m viá»‡c vá»›i comments DB
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ jsonDB.js              # Utility Ä‘á»ƒ Ä‘á»c/ghi JSON file
â”‚
â”œâ”€â”€ db/                         # ThÆ° má»¥c chá»©a database (tá»± Ä‘á»™ng táº¡o)
â”‚   â”œâ”€â”€ posts.json             # Dá»¯ liá»‡u posts
â”‚   â””â”€â”€ comments.json          # Dá»¯ liá»‡u comments
â”‚
â”œâ”€â”€ .gitignore                 # Ignore files khÃ´ng cáº§n commit
â”œâ”€â”€ package.json               # ThÃ´ng tin project vÃ  dependencies
â”œâ”€â”€ package-lock.json          # Lock dependencies version
â””â”€â”€ README.md                  # File nÃ y
```

---

## ğŸ§ª Test API vá»›i Postman

### 1. Táº¡o Post má»›i

**Request:**
```
POST http://localhost:3000/api/posts
Content-Type: application/json

Body:
{
  "title": "BÃ i viáº¿t Ä‘áº§u tiÃªn",
  "content": "Ná»™i dung bÃ i viáº¿t"
}
```

**Response (201):**
```json
{
  "id": "1738157123456",
  "title": "BÃ i viáº¿t Ä‘áº§u tiÃªn",
  "content": "Ná»™i dung bÃ i viáº¿t",
  "createdAt": "2026-01-29T10:32:03.456Z"
}
```

### 2. Láº¥y táº¥t cáº£ Posts

**Request:**
```
GET http://localhost:3000/api/posts
```

**Response (200):**
```json
[
  {
    "id": "1738157123456",
    "title": "BÃ i viáº¿t Ä‘áº§u tiÃªn",
    "content": "Ná»™i dung bÃ i viáº¿t",
    "createdAt": "2026-01-29T10:32:03.456Z"
  }
]
```

### 3. Táº¡o Comment

**Request:**
```
POST http://localhost:3000/api/comments
Content-Type: application/json

Body:
{
  "postId": "1738157123456",
  "content": "Comment Ä‘áº§u tiÃªn"
}
```

**Response (201):**
```json
{
  "id": "1738157234567",
  "postId": "1738157123456",
  "content": "Comment Ä‘áº§u tiÃªn",
  "createdAt": "2026-01-29T10:33:54.567Z"
}
```

### 4. Cáº­p nháº­t Post

**Request:**
```
PUT http://localhost:3000/api/posts/1738157123456
Content-Type: application/json

Body:
{
  "title": "TiÃªu Ä‘á» Ä‘Ã£ cáº­p nháº­t",
  "content": "Ná»™i dung Ä‘Ã£ cáº­p nháº­t"
}
```

**Response (200):**
```json
{
  "id": "1738157123456",
  "title": "TiÃªu Ä‘á» Ä‘Ã£ cáº­p nháº­t",
  "content": "Ná»™i dung Ä‘Ã£ cáº­p nháº­t",
  "createdAt": "2026-01-29T10:32:03.456Z"
}
```

### 5. XÃ³a Post

**Request:**
```
DELETE http://localhost:3000/api/posts/1738157123456
```

**Response (204):**
```
(No content)
```

---

## âš™ï¸ CORS Configuration

API Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh CORS Ä‘á»ƒ cho phÃ©p requests tá»«:
- `http://localhost:5173` (Vite dev server)
- `https://[your-username].github.io` (GitHub Pages)

CÃ¡c HTTP methods Ä‘Æ°á»£c phÃ©p:
- GET
- POST
- PUT
- DELETE
- OPTIONS

---

## ğŸ› Xá»­ lÃ½ lá»—i

### Lá»—i: `Cannot find module 'express'`

**Giáº£i phÃ¡p:**
```bash
npm install express cors
```

### Lá»—i: `Error: listen EADDRINUSE: address already in use :::3000`

**Giáº£i phÃ¡p:** Port 3000 Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng. 

**TÃ¬m vÃ  kill process:**

Mac/Linux:
```bash
lsof -ti:3000 | xargs kill -9
```

Windows:
```cmd
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

Hoáº·c Ä‘á»•i port trong `server.js`:
```javascript
const PORT = 3001; // Äá»•i sang port khÃ¡c
```

### Lá»—i: `404 Not Found` khi gá»i API

**Kiá»ƒm tra:**
1. Server Ä‘Ã£ cháº¡y chÆ°a?
2. URL cÃ³ Ä‘Ãºng format khÃ´ng? `/api/posts` chá»© khÃ´ng pháº£i `/posts`
3. Kiá»ƒm tra console log cá»§a server

---

## ğŸ“ LÆ°u Ã½

### Database tá»± Ä‘á»™ng táº¡o

- ThÆ° má»¥c `/db` vÃ  cÃ¡c file JSON sáº½ **tá»± Ä‘á»™ng táº¡o** khi báº¡n gá»i API láº§n Ä‘áº§u
- KhÃ´ng cáº§n táº¡o thá»§ cÃ´ng

### ID tá»± Ä‘á»™ng

- Má»—i post/comment Ä‘Æ°á»£c táº¡o sáº½ cÃ³ ID duy nháº¥t dá»±a trÃªn timestamp
- Format: `"1738157123456"`

### Dá»¯ liá»‡u lÆ°u trá»¯

- Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong file JSON táº¡i thÆ° má»¥c `/db`
- Khi xÃ³a thÆ° má»¥c `/db`, táº¥t cáº£ dá»¯ liá»‡u sáº½ máº¥t
- ÄÃ¢y chá»‰ lÃ  database Ä‘Æ¡n giáº£n Ä‘á»ƒ há»c táº­p, khÃ´ng dÃ¹ng cho production

---

## ğŸ”„ Reset dá»¯ liá»‡u

Náº¿u muá»‘n xÃ³a toÃ n bá»™ dá»¯ liá»‡u vÃ  báº¯t Ä‘áº§u láº¡i:

```bash
# XÃ³a thÆ° má»¥c database
rm -rf db

# Hoáº·c trÃªn Windows
rmdir /s /q db
```

Khi cháº¡y láº¡i server vÃ  gá»i API, database sáº½ Ä‘Æ°á»£c táº¡o má»›i.

---

## ğŸ“š TÃ i nguyÃªn tham kháº£o

- [Express.js Documentation](https://expressjs.com/)
- [CORS Middleware](https://expressjs.com/en/resources/middleware/cors.html)
- [Node.js File System](https://nodejs.org/docs/latest/api/fs.html)
- [REST API Best Practices](https://restfulapi.net/)

---

## ğŸ‘¨â€ğŸ’» TÃ¡c giáº£

[Manh Thang]

## ğŸ“„ License

ISC

---

## â“ Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á», vui lÃ²ng:
1. Kiá»ƒm tra láº¡i cÃ¡c bÆ°á»›c cÃ i Ä‘áº·t
2. Äá»c pháº§n [Xá»­ lÃ½ lá»—i](#xá»­-lÃ½-lá»—i)
3. Táº¡o issue trÃªn GitHub repository
